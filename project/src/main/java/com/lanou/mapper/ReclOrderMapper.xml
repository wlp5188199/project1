<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanou.mapper.ReclOrderMapper">
	<resultMap id="BaseResultMap" type="com.lanou.entity.ReclOrder">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="order_no" jdbcType="VARCHAR" property="order_no" />
		<result column="scrap_code" jdbcType="VARCHAR" property="scrap_code" />
		<result column="owner_id" jdbcType="VARCHAR" property="owner_id" />
		<result column="sc_id" jdbcType="VARCHAR" property="sc_id" />
		<result column="rd_id" jdbcType="VARCHAR" property="rd_id" />
		<result column="amount" jdbcType="INTEGER" property="amount" />
		<result column="unit" jdbcType="VARCHAR" property="unit" />
		<result column="money" jdbcType="INTEGER" property="money" />
		<result column="sc_status" jdbcType="VARCHAR" property="sc_status" />
		<result column="rd_status" jdbcType="VARCHAR" property="rd_status" />
		<result column="create_time" jdbcType="TIMESTAMP" property="create_time" />
		<result column="update_time" jdbcType="TIMESTAMP" property="update_time" />
	</resultMap>
	<resultMap type="com.lanou.bean.ReclBean" id="reclMap">
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="order_no" jdbcType="VARCHAR" property="order_no" />
		<result column="ownerName" jdbcType="VARCHAR" property="owner_name" />
		<result column="scrapName" jdbcType="VARCHAR" property="scrap_name" />
		<result column="testName" jdbcType="VARCHAR" property="sc_name" />
		<result column="scrapName" jdbcType="VARCHAR" property="scrap_name" />
		<result column="amount" jdbcType="INTEGER" property="amount" />
		<result column="unit" jdbcType="VARCHAR" property="unit" />
		<result column="price" jdbcType="INTEGER" property="money" />
		<result column="rd_status_val" jdbcType="VARCHAR" property="rd_status_val" />
		<result column="sc_status_val" jdbcType="VARCHAR" property="sc_status_val" />
		<result column="create_time" jdbcType="TIMESTAMP" property="create_time" />
		<result column="update_time" jdbcType="TIMESTAMP" property="update_time" />

	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		id, order_no, scrap_code, owner_id, sc_id, rd_id, amount, unit, money,
		sc_status,
		rd_status, create_time, update_time
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		select
		<include refid="Base_Column_List" />
		from reclamation_order
		where id = #{id,jdbcType=INTEGER}
	</select>
	<!-- 查询所有废品订单管理信息 根据名称查询废品信息 -->
	<select id="selectAll" parameterType="java.util.Map" resultMap="reclMap">
		SELECT
		r.id,
		r.order_no,
		o.`name` as ownerName,
		sc.`name` as testName,
		s.scrap_name as ScrapName,
		r.amount,
		r.money,
		r.create_time,
		r.update_time,
		s.unit,
		s.price,
		r.rd_id,
		sd.dict_text AS sc_status_val,
		sd1.dict_text AS rd_status_val
		FROM
		reclamation_order r
		LEFT JOIN scrap s ON r.scrap_code = s.scrap_code
		LEFT JOIN `owner` o ON r.owner_id = o.id
		LEFT JOIN scrap_collector sc ON r.sc_id = sc.id
		LEFT JOIN sys_dict sd ON sd.dict_option = r.sc_status
		LEFT JOIN sys_dict sd1 ON sd1.dict_option = r.rd_status
		where 1=1
		<if test="owner_name!=null and owner_name!=''">
			and o.`name` = #{owner_name}
		</if>
		order by ${column} ${order}

		limit #{start},#{length}
	</select>
	<select id="selectPageCount" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		SELECT
		count(1)
		FROM
		reclamation_order r
		LEFT JOIN scrap s ON r.scrap_code
		= s.scrap_code
		LEFT JOIN `owner` o ON r.owner_id = o.id
		LEFT JOIN
		scrap_collector sc ON
		r.sc_id = sc.id
		LEFT JOIN sys_dict sd ON
		sd.dict_option = r.sc_status
		LEFT JOIN sys_dict sd1 ON sd1.dict_option
		= r.rd_status
		where 1=1
		<if test="owner_name!=null and owner_name!=''">
			and o.`name` = #{owner_name}
		</if>
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		delete from reclamation_order
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.lanou.entity.ReclOrder">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		insert into reclamation_order (id, order_no, scrap_code,
		owner_id,
		sc_id, rd_id,
		amount, unit, money,
		sc_status, rd_status, create_time,
		update_time)
		values (#{id,jdbcType=INTEGER},
		#{order_no,jdbcType=VARCHAR},
		#{scrap_code,jdbcType=VARCHAR},
		#{owner_id,jdbcType=VARCHAR}, #{sc_id,jdbcType=VARCHAR},
		#{rd_id,jdbcType=VARCHAR},
		#{amount,jdbcType=INTEGER},
		#{unit,jdbcType=VARCHAR},
		#{money,jdbcType=INTEGER},
		#{sc_status,jdbcType=VARCHAR}, #{rd_status,jdbcType=VARCHAR},
		#{create_time,jdbcType=TIMESTAMP},
		#{update_time,jdbcType=TIMESTAMP})
	</insert>
	<insert id="insertSelective" parameterType="com.lanou.entity.ReclOrder">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		insert into reclamation_order
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="order_no != null">
				order_no,
			</if>
			<if test="scrap_code != null">
				scrap_code,
			</if>
			<if test="owner_id != null">
				owner_id,
			</if>
			<if test="sc_id != null">
				sc_id,
			</if>
			<if test="rd_id != null">
				rd_id,
			</if>
			<if test="amount != null">
				amount,
			</if>
			<if test="unit != null">
				unit,
			</if>
			<if test="money != null">
				money,
			</if>
			<if test="sc_status != null">
				sc_status,
			</if>
			<if test="rd_status != null">
				rd_status,
			</if>
			<if test="create_time != null">
				create_time,
			</if>
			<if test="update_time != null">
				update_time,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="order_no != null">
				#{order_no,jdbcType=VARCHAR},
			</if>
			<if test="scrap_code != null">
				#{scrap_code,jdbcType=VARCHAR},
			</if>
			<if test="owner_id != null">
				#{owner_id,jdbcType=VARCHAR},
			</if>
			<if test="sc_id != null">
				#{sc_id,jdbcType=VARCHAR},
			</if>
			<if test="rd_id != null">
				#{rd_id,jdbcType=VARCHAR},
			</if>
			<if test="amount != null">
				#{amount,jdbcType=INTEGER},
			</if>
			<if test="unit != null">
				#{unit,jdbcType=VARCHAR},
			</if>
			<if test="money != null">
				#{money,jdbcType=INTEGER},
			</if>
			<if test="sc_status != null">
				#{sc_status,jdbcType=VARCHAR},
			</if>
			<if test="rd_status != null">
				#{rd_status,jdbcType=VARCHAR},
			</if>
			<if test="create_time != null">
				#{create_time,jdbcType=TIMESTAMP},
			</if>
			<if test="update_time != null">
				#{update_time,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.lanou.entity.ReclOrder">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		update reclamation_order
		<set>
			<if test="order_no != null">
				order_no = #{order_no,jdbcType=VARCHAR},
			</if>
			<if test="scrap_code != null">
				scrap_code = #{scrap_code,jdbcType=VARCHAR},
			</if>
			<if test="owner_id != null">
				owner_id = #{owner_id,jdbcType=VARCHAR},
			</if>
			<if test="sc_id != null">
				sc_id = #{sc_id,jdbcType=VARCHAR},
			</if>
			<if test="rd_id != null">
				rd_id = #{rd_id,jdbcType=VARCHAR},
			</if>
			<if test="amount != null">
				amount = #{amount,jdbcType=INTEGER},
			</if>
			<if test="unit != null">
				unit = #{unit,jdbcType=VARCHAR},
			</if>
			<if test="money != null">
				money = #{money,jdbcType=INTEGER},
			</if>
			<if test="sc_status != null">
				sc_status = #{sc_status,jdbcType=VARCHAR},
			</if>
			<if test="rd_status != null">
				rd_status = #{rd_status,jdbcType=VARCHAR},
			</if>
			<if test="create_time != null">
				create_time = #{create_time,jdbcType=TIMESTAMP},
			</if>
			<if test="update_time != null">
				update_time = #{update_time,jdbcType=TIMESTAMP},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.lanou.entity.ReclOrder">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 26 
			10:20:04 CST 2017. -->
		update reclamation_order
		set order_no = #{order_no,jdbcType=VARCHAR},
		scrap_code = #{scrap_code,jdbcType=VARCHAR},
		owner_id =
		#{owner_id,jdbcType=VARCHAR},
		sc_id = #{sc_id,jdbcType=VARCHAR},
		rd_id =
		#{rd_id,jdbcType=VARCHAR},
		amount = #{amount,jdbcType=INTEGER},
		unit =
		#{unit,jdbcType=VARCHAR},
		money = #{money,jdbcType=INTEGER},
		sc_status =
		#{sc_status,jdbcType=VARCHAR},
		rd_status =
		#{rd_status,jdbcType=VARCHAR},
		create_time =
		#{create_time,jdbcType=TIMESTAMP},
		update_time =
		#{update_time,jdbcType=TIMESTAMP}
		where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>